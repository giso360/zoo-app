# ZOO APP

This is a dockerized Spring boot CRUD application using PostgreSQL RDBMS. No unit tests are included. 


## DESCRIPTION

The service will basically act as an inventory of animals that are available in our Virtual Zoo. Our visitors will be able to browse all available animals and also, we will give them the ability to see them perform their tricks!


## REQUIREMENTS

- Java 11
- Docker/docker-compose

## DATABASE/SCHEMA DESCRIPTION

The database consists of 5 separate tables reflecting the relationships between the entities for the business requirements of the project.

- SPECIES TABLE
   â€‹	

   | species_id | species_name |
   | ---------- | ------------ |
   | 1          | dog          |
   | 2          | cat          |

- TRICKS TABLE

   
   | trick_id | trick_name |
   | -------- | ---------- |
   | 1        | run        |
   | 2        | jump       |
   | 3        | roll over  |
   | 4        | meaow      |
   | 5        | bark       |

- SPECIES_TRICKS TABLE - establishes N-N relationship for species and trick entities with the required foreign key bindings. It reflects the fact that every animal can learn skills from a predetermined pool of tricks that is species specific


   | species_id | trick_id |
   | ---------- | -------- |
   | 1          | 1        |
   | 1          | 2        |
   | 1          | 3        |
   | 1          | 5        |
   | 2          | 1        |
   | 2          | 2        |
   | 2          | 4        |

- ANIMALS TABLE (species table provides foreign key for animal_species column/entity attribute). Note that animals are uniquely identified by specifiers that comply with the **UUID** format


   | animal_id                            | animal_name | animal_species |
   | ------------------------------------ | ----------- | -------------- |
   | 476bed0a-2858-11ec-9621-0242ac130002 | maha        | 1              |
   | 476be88c-2858-11ec-9621-0242ac130002 | tara        | 1              |
   | 476beaa8-2858-11ec-9621-0242ac130002 | kenzi       | 2              |

- ANIMAL_TRICKS TABLE - establishes N-N relationship for animal and trick entities with the required foreign key bindings. It identifies the set of tricks that each animal is capable of performing  


   | animal_id                            | trick_id |
   | ------------------------------------ | -------- |
   | 476bed0a-2858-11ec-9621-0242ac130002 | 1        |
   | 476bed0a-2858-11ec-9621-0242ac130002 | 2        |
   | 476bed0a-2858-11ec-9621-0242ac130002 | 3        |
   | 476bed0a-2858-11ec-9621-0242ac130002 | 5        |
   | 476be88c-2858-11ec-9621-0242ac130002 | 1        |
   | 476be88c-2858-11ec-9621-0242ac130002 | 2        |
   | 476be88c-2858-11ec-9621-0242ac130002 | 5        |
   | 476beaa8-2858-11ec-9621-0242ac130002 | 1        |
   | 476beaa8-2858-11ec-9621-0242ac130002 | 2        |
   | 476beaa8-2858-11ec-9621-0242ac130002 | 4        |

   


These tables are supplemented with two extra tables that are generated by liquibase DB versioning tool. Namely:

- databasechangelog  
- databasechangeloglock  


## HOW TO RUN

1. Download repo

2. Run docker command:  `docker run -p 5432:5432 -d -e POSTGRES_USER=zoousr -e POSTGRES_PASSWORD=zoopwd -e POSTGRES_DB=zoodb postgres:11`

3. Package the app in Intellij IDE by selecting from the Maven toolbar CLEAN + PACKAGE

4. Copy produced .Jar file from **target** folder to the folder named **docker**

5. Stop and remove previous Postgres container and associated volumes

6. Navigate inside docker folder and in there issue command: `docker-compose up`

7. Connect to DB of container using psql OR an SQL client of your choosing using the following connection details:

    - DB URL: jdbc:postgresql://localhost:5432/zoodb
    - DB HOST: localhost
    - DB PORT: 5432
    - DB DATABASE: zoodb
    - DB USER: zoousr
    - DB PASSWORD: zoopwd 



## API

**Note**: All HTTP requests are of type **GET**

- Get all animals: `localhost:8082/myZoo/animals/all`
- Get all animals by species (e.g. cat, dog - case insensitive): `localhost:8082/myZoo/animals/all/{**speciesName**}`
- Make animal perform trick by choosing its UUID: `localhost:8082/myZoo/animals/{**UUID**}/doTrick`
- Make animal learn trick by choosing its UUID: `localhost:8082/myZoo/animals/{**UUID**}}/learnTrick`